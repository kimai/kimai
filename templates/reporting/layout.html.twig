{% extends 'base.html.twig' %}
{% import "macros/widgets.html.twig" as widgets %}

{% block page_title %}{{ 'menu.reporting'|trans }}{% endblock %}

{% block breadcrumb %}
    {% from "macros/breadcrumb.html.twig" import breadcrumb %}
    {{ breadcrumb({
        ('menu.reporting'|trans): path('reporting'),
        (report_title|trans({}, 'reporting')): '#'
    }) }}
{% endblock %}

{% block page_actions %}
    {% set event = actions(app.user, 'reporting', 'report') %}
    {{ widgets.page_actions(event.actions) }}
{% endblock %}

{% block main %}
    {% if block('report_form') is defined %}
    <div class="card mb-3">
        <div class="card-body">
            {{ block('report_form') }}
        </div>
    </div>
    {% endif %}

    <div class="row">
        <div class="col-md-12" id="reporting-content">
            {% block report %}{% endblock %}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        const reportForm = document.getElementById('report-form');
        if (reportForm !== null) {
            reportForm.addEventListener('change', (event) => {
                reportForm.submit();
            });
        }
    </script>
{% endblock %}
